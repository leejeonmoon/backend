<!DOCTYPE html>
<html lang="en">
<head th:replace="~{base :: head}">
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <title th:text="'OAuth Index - IP Cam'">OAuth Index - IP Cam</title>
</head>
<body>
<header th:replace="~{base :: header}"></header>

<div class="content-wrapper">
    <!-- 알람 리스트 -->
    <div class="alarm-list">
        <h3>알람 리스트</h3>
        <div id="alarm-container">
            <p>알람 데이터를 불러오는 중...</p>
        </div>
        <button onclick="manualUpdateAlarms()" class="custom-btn update-btn">
            <img src="/img/refresh.svg" alt="Reload" class="reload-icon"> 수동 업데이트
        </button>
    </div>

<div class="main-content">
    <h2>Start with EyePi</h2>
    <div class="buttons">
        <a href="/streaming" class="custom-btn">Move to my video</a>
        <a href="/video" class="custom-btn">Recorded video</a>
    </div>
</div>
</div>/div>
</div>

<!-- 스크립트 파일 -->
<script th:src="@{/js/oauth.js}"></script>
<script th:src="@{/js/token.js}"></script>
<script th:src="@{/js/modal.js}"></script>

<!-- Bootstrap JS 및 필요한 스크립트 추가 -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // 페이지 로드 시 GET 요청
        httpRequest('GET', '/oauthIndex', null, function() {
            console.log("페이지 로드 성공");
        });

        // 버튼 클릭 시 각각의 페이지로 이동
        document.getElementById('move-video-btn').addEventListener('click', function(event) {
            event.preventDefault();
            httpRequest('GET', '/streaming', null, function() {
                location.href = '/streaming';
            });
        });

        document.getElementById('recorded-video-btn').addEventListener('click', function(event) {
            event.preventDefault();
            httpRequest('GET', '/video', null, function() {
                location.href = '/video';
            });
        });

        document.getElementById('alarm-btn').addEventListener('click', function(event) {
            event.preventDefault();
            httpRequest('GET', '/notification', null, function() {
                location.href = '/notification';
            });
        });
    });
</script>

</body>
</html>